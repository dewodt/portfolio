---
import LayoutBase from "@/layouts/LayoutBase.astro";
import type {
  AllAwardsQueryResult,
  AwardsPageQueryResult,
} from "@/types/sanity";
import { sanityClient, allAwardsQuery, awardsPageQuery } from "@/lib/query";
import CardAwards from "@/components/ui/card/CardAwards.astro";

// Get awards page from CMS
const awardsPageData =
  await sanityClient.fetch<AwardsPageQueryResult>(awardsPageQuery);
// Get all awards from CMS
const allAwardsData =
  await sanityClient.fetch<AllAwardsQueryResult>(allAwardsQuery);

if (!awardsPageData) {
  throw new Error("Failed to fetch awards page data");
}
---

<LayoutBase
  title={`${awardsPageData.title} | Dewantoro Triatmojo`}
  description={awardsPageData.description}
>
  <main class="flex flex-auto justify-center px-5 py-12 sm:p-12 lg:p-16">
    <section
      class="flex w-full max-w-6xl flex-col items-center gap-8 lg:gap-12"
    >
      {/* Header */}
      <div class="flex flex-col text-center">
        <span
          class="animate-fade-in-up text-primary mb-1.5 font-mono text-xs tracking-widest uppercase opacity-0 lg:mb-2.5 lg:text-sm"
          style="animation-delay: 0.1s;"
        >
          Awards
        </span>
        <h1
          class="animate-fade-in-up text-secondary mb-3 text-3xl font-bold opacity-0 lg:mb-4 lg:text-5xl"
          style="animation-delay: 0.2s;"
        >
          {awardsPageData.title}
        </h1>
        <p
          class="animate-fade-in-up text-muted text-base opacity-0 lg:text-lg"
          style="animation-delay: 0.3s;"
        >
          {awardsPageData.description}
        </p>
      </div>

      {/* Awards Grid */}
      <ul class="grid w-full grid-cols-1 gap-6 lg:grid-cols-2 lg:gap-8">
        {
          allAwardsData.map((award, index) => (
            <li
              class="animate-fade-in-up opacity-0"
              style={`animation-delay: ${0.3 + index * 0.05}s;`}
            >
              <CardAwards award={award} />
            </li>
          ))
        }
      </ul>
    </section>
  </main>
</LayoutBase>
