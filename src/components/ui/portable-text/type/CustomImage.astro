---
import type { Props as $, TypedObject } from "astro-portabletext/types";
import ZoomableImage from "@/components/image/zoomable-image.astro";

type Props = $<TypedObject> & {
  node: {
    url: string;
    alt: string;
    caption: boolean;
  };
};

const props = Astro.props;
---

{
  props.node.caption ? (
    <figure class="mb-5 flex flex-col gap-1 lg:mb-6 lg:gap-2">
      <ZoomableImage
        class="flex aspect-video w-full items-center justify-evenly rounded-lg bg-card object-cover object-center text-base font-medium text-secondary"
        src={props.node.url}
        alt={props.node.alt}
        widths={[370, 768, 1280]}
        sizes="(max-width: 640px) 370px, (max-width: 1024px) 768px, 1280px"
        inferSize
      />
      <figcaption class="text-center text-base font-medium text-secondary lg:text-lg">
        {props.node.alt}
      </figcaption>
    </figure>
  ) : (
    <ZoomableImage
      class="mb-5 flex aspect-video w-full items-center justify-evenly rounded-lg bg-card object-cover object-center text-base font-medium text-secondary lg:mb-6"
      src={props.node.url}
      alt={props.node.alt}
      widths={[370, 768, 1280]}
      sizes="(max-width: 640px) 370px, (max-width: 1024px) 768px, 1280px"
      inferSize
    />
  )
}
