---
import type { Props as $, Block as BlockType } from "astro-portabletext/types";
import { Block } from "astro-portabletext/components"; // Default `astro-portabletext` component
import CustomH2 from "./style/CustomH2.astro";
import CustomH3 from "./style/CustomH3.astro";
import CustomH4 from "./style/CustomH4.astro";
import CustomNormal from "./style/CustomNormal.astro";
import CustomQuote from "./style/CustomBlockquote.astro";

export type Props = $<BlockType>;

const props = Astro.props;
const styleIs = (style: string) => style === props.node.style;

const Cmp = styleIs("h2")
  ? CustomH2
  : styleIs("h3")
    ? CustomH3
    : styleIs("h4")
      ? CustomH4
      : styleIs("normal")
        ? CustomNormal
        : styleIs("blockquote")
          ? CustomQuote
          : Block; // Fallback to `astro-portabletext`
---

<Cmp {...props}><slot /></Cmp>
